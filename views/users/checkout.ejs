<%- include('../layouts/header.ejs') %>

    <%- include('../users/userHeader.ejs') %>


        <!-- Breadcrumb Section Begin -->
        <section class="breadcrumb-option">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="breadcrumb__text">
                            <h4>Check Out</h4>
                            <div class="breadcrumb__links">
                                <a href="./index.html">Home</a>
                                <a href="./shop.html">Shop</a>
                                <span>Check Out</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Breadcrumb Section End -->

        <!-- Checkout Section Begin -->
        <section class="checkout spad">
            <div class="container">
                <div class="checkout__form">

                    <div class="row">
                        <div class="col-lg-8 col-md-6 ">

                            <div class="coupon__code">
                                <h6 class=""><span class="icon_tag_alt"></span> Have a coupon?
                                    enter your code to check it's validity</h6>

                                <form class="" style="margin-left: 33px; margin-top: 15px;" id="couponValidityChecker">
                                    <input type="text" name="couponCode">

                                    <button class=" bg-dark border-0 text-white  font-weight-bold px-2"
                                        style="height: 27px;">verify</button>
                                </form>
                            </div>





                            <% if(Addresses.length> 0){%>


                                <div class=" w-100" style="margin-bottom: 2rem;">

                                    <div class="custom-selected w-100">
                                        <button
                                            class="select-button font-weight-bold d-flex justify-content-between px-4 align-items-center w-100">
                                            <span> Select Your Delivery Address </span><i
                                                class="fa-solid fa-caret-down ml-3"></i></button>
                                    </div>

                                    <ul class="select-options  border-0 position-relative ml-3" style="width: 98%;">


                                        <% for(let i=0 ; i< Addresses.length; i++) { %>
                                            <div class="mt-4 font-weight-bold" style="
                                                    background-color: #f3f2ee;
                                                    
                                                 padding: 1rem;">

                                                <input class=" addressRadio  align-self-start" type="radio"
                                                    id="<%= i %>" name="address" value="<%= Addresses[i]._id %>">
                                                <label class="ml-2" for="<%= i %>">
                                                    <P class=" mb-0"
                                                        style="font-family:'Times New Roman', Times, serif; font-weight: bold;">
                                                        <%=Addresses[i].fullName%>
                                                    </P>

                                                </label>

                                                <div class="ml-4">


                                                    <p class=" mb-0"
                                                        style="font-family:'Times New Roman', Times, serif; font-weight: bold;">
                                                        <%=Addresses[i].addressLine%>
                                                    </p>
                                                    <p class=" mb-0"
                                                        style="font-family:'Times New Roman', Times, serif; font-weight: bold;">
                                                        <%=Addresses[i].locality%>
                                                    </p>
                                                    <p class=" mb-0"
                                                        style="font-family:'Times New Roman', Times, serif; font-weight: bold;">
                                                        <%=Addresses[i].city%>
                                                    </p>
                                                    <p class=" mb-0"
                                                        style="font-family:'Times New Roman', Times, serif; font-weight: bold;">
                                                        <%=Addresses[i].state%>
                                                    </p>
                                                    <p class=" mb-0"
                                                        style="font-family:'Times New Roman', Times, serif; font-weight: bold;">
                                                        <%=Addresses[i].country%>
                                                    </p>
                                                    <p class=" mb-0"
                                                        style="font-family:'Times New Roman', Times, serif; font-weight: bold;">
                                                        Pincode:
                                                        <%=Addresses[i].pinCode%>
                                                    </p>
                                                    <p class=" mb-0"
                                                        style="font-family:'Times New Roman', Times, serif; font-weight: bold;">
                                                        phone:
                                                        <%=Addresses[i].phone%>
                                                    </p>


                                                </div>




                                            </div>



                                            <% } %>
                                    </ul>
                                </div>

                                <%}%>


                                    <div class=" w-100">

                                        <div class="custom-selected w-100">
                                            <button
                                                class=" select-button font-weight-bold d-flex justify-content-between px-4 align-items-center w-100">
                                                <span>Add New Delivery Address </span><i
                                                    class="fa-solid fa-caret-down ml-3"></i></button>
                                        </div>


                                        <ul
                                            class="select-options w-100 border-0 mt-5 position-relative ml-3 pr-4 font-weight-bold">

                                            <form id="newAddressForm">

                                                <div class="row f">
                                                    <div class="col-lg-6 w-100">
                                                        <div class="checkout__input w-100">
                                                            <p>Full Name<span>*</span></p>
                                                            <input name="fullName" type="text">
                                                        </div>
                                                    </div>

                                                </div>
                                                <div class="checkout__input">
                                                    <p>Country<span>*</span></p>
                                                    <input name="country" type="text">
                                                </div>
                                                <div class="checkout__input">
                                                    <p>Address<span>*</span></p>

                                                    <textarea class="w-100" name="addressLine" id="" cols="30"
                                                        rows="10"></textarea>
                                                </div>

                                                <div class="checkout__input">
                                                    <p>Locality<span>*</span></p>
                                                    <input name="locality" type="text">
                                                </div>



                                                <div class="checkout__input">
                                                    <p>Town/City/District<span>*</span></p>
                                                    <input name="city" type="text">
                                                </div>


                                                <div class="checkout__input">
                                                    <p>State<span>*</span></p>
                                                    <input name="state" type="text">
                                                </div>
                                                <div class="checkout__input">
                                                    <p>Postcode / ZIP<span>*</span></p>
                                                    <input name="pinCode" type="number">
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class="checkout__input">
                                                            <p>Phone<span>*</span></p>
                                                            <input name="phone" type="number">
                                                        </div>
                                                    </div>



                                                </div>

                                                <div class="w-100 mt-3">
                                                    <button type="submit" id="newAddressSubmitBtn"
                                                        style="background-color: black ; color: aliceblue ;"
                                                        class="w-100 font-weight-bold p-2">Submit</button>
                                                </div>

                                            </form>






                                        </ul>

                                    </div>
                        </div>



                        <div class="col-lg-4 col-md-6">
                            <div class="checkout__order">
                                <h4 class="order__title">Your order</h4>
                                <div class="checkout__order__products">Product <span>Total</span></div>
                                <ul class="checkout__total__products">

                                    <% if(itemsInCart.length> 0 ) { %>

                                        <% for(let i=0; i < itemsInCart.length ; i++){ %>





                                            <li>

                                                <div class="d-flex  ">

                                                    <div class="" style="width: 74%;">
                                                        <%=i+1%>. <%=itemsInCart[i].cartProductData.name%> (
                                                                <%=itemsInCart[i].quantity%> )
                                                    </div>

                                                    <div style="width: 26%;" class="text-right d-inline-block">
                                                        <%=itemsInCart[i].totalPriceOfTheProduct%>.0
                                                    </div>

                                                </div>

                                            </li>

                                            <%}%>

                                                <%} else{%>

                                                    <li> Your cart is empty </li>

                                                    <%} %>

                                </ul>
                                <ul class="checkout__total__all">

                                    <li>Total <span>Rs.<%=totalPriceOfCart%></span></li>
                                </ul>

                                <div class="d-flex justify-content-center mb-3">
                                    <input id="couponApplied" class="w-100 p-2" type="text" name="couponApplied"
                                        placeholder="Enter Coupon Code ">

                                </div>

                                <div class="mt-4 mb-3">

                                    <p>Choose Your Mode Of Payment</p>

                                    <div>
                                        <input class="paymentMethod" type="radio" value="cod" name="paymentMethod">
                                        <label for="">COD</label>
                                    </div>

                                    <div>
                                        <input class="paymentMethod" type="radio" value="onlinePayment"
                                            name="paymentMethod">
                                        <label for="">Pay Now</label>
                                    </div>


                                </div>



                                <button id="proceedToPaymentBtn" class="site-btn" <% if(itemsInCart.length <=0 ) { %>
                                    disabled <%}%>

                                        >PROCEED TO PAYMENT</button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </section>
        <!-- Checkout Section End -->



        <%- include('../users/userFooter.ejs') %>

            <script src="/js/user/checkout.js"></script>
            <%- include('../layouts/footer.ejs') %>