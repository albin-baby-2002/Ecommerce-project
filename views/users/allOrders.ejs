<%- include('../layouts/header.ejs') %>

    <%- include('../users/userHeader.ejs') %>

        <body class="goto-here " data-aos-easing="slide" data-aos-duration="800" data-aos-delay="0">


            <!-- Breadcrumb Section Begin -->
            <section class="breadcrumb-option ">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="breadcrumb__text">
                                <h4>Orders</h4>
                                <div class="breadcrumb__links">
                                    <a href="/">Home</a>
                                    <span>Orders</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>


            <div class="my-5" style="min-height: 100vh;">

                <% if(orders && orders.length>0){%>

                    <% for(let i=0 ; i< orders.length ; i++) { %>



                        <section class=" gradient-custom" data-id="<%=orders[i]._id%>">
                            <div class="container py-3 ">
                                <div class="row d-flex justify-content-center align-items-center ">
                                    <div class="col-lg-12 col-xl-8">
                                        <div class="card" style="border-radius: 10px;">



                                            <div class="card-body p-4">
                                                <div
                                                    class="d-flex justify-content-between align-items-center mb-4 mx-3">


                                                    <p class="small text-muted mb-0 text-uppercase text-center  col-12 col-lg-auto "
                                                        style="letter-spacing: .1rem;">Order Status : <%=
                                                            orders[i].orderStatus%>
                                                    </p>
                                                </div>

                                                <% if(orders[i].orderedItems && orders[i].orderedItems.length> 0) {%>

                                                    <% for(let j=0 ; j< orders[i].orderedItems.length ; j++ ){%>

                                                        <div class="card shadow-0 border mb-4">
                                                            <div class="card-body">
                                                                <div class="row">
                                                                    <div class="col-md-3 d-flex justify-content-center">

                                                                        <img src="/img/productImages/<%=orders[i].orderedItems[j].productInfo.images.find((img)=>{
                                                                return img.toLowerCase().includes('mainimg')
                                                            }) %> " class="img-thumbnail" alt="Phone"
                                                                            style="height: 100px; width: 85px; object-fit: contain;">

                                                                    </div>
                                                                    <div
                                                                        class="col-md-3 text-center d-flex justify-content-center align-items-center">
                                                                        <p class="text-muted mb-0">
                                                                            <%=orders[i].orderedItems[j].productInfo.name%>
                                                                        </p>
                                                                    </div>


                                                                    <div
                                                                        class="col-md-3 text-center d-flex justify-content-center align-items-center">
                                                                        <p class="text-muted mb-0 small">Qty:
                                                                            <%=orders[i].orderedItems[j].quantity%>
                                                                        </p>
                                                                    </div>
                                                                    <div
                                                                        class="col-md-3 text-center d-flex justify-content-center align-items-center">
                                                                        <p class="text-muted mb-0 small">
                                                                            Total:
                                                                            <%=orders[i].orderedItems[j].totalPrice%>
                                                                        </p>
                                                                    </div>
                                                                </div>



                                                            </div>
                                                        </div>

                                                        <%}%>

                                                            <%}%>








                                                                <div class=" d-flex justify-content-between mx-4">
                                                                    <button
                                                                        class="cancelOrderBtn text-uppercase nav-link p-2 "
                                                                        order-id="<%=orders[i]._id%>"
                                                                        style="letter-spacing: 2px;  color: rgb(139, 39, 39); font-weight: 600; font-size: .8rem;">
                                                                        cancel order</button>

                                                                    <button class=" text-uppercase nav-link p-2 "
                                                                        style="letter-spacing: 2px; color: rgb(37, 120, 85); font-size: .8rem; ">
                                                                        <a class="nav-link" style="font-weight: 600;"
                                                                            href="/user/orderDetails/<%=orders[i]._id%>">
                                                                            order DETAILS</a>
                                                                    </button>
                                                                </div>

                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <%}%>
                            <%} else {%>

                                <h2 class="text-center font-weight-bold">No Orders Placed</h2>

                                <%}%>




            </div>







            <%- include('../users/userFooter.ejs') %>

                <script src="/js/user/orders.js"></script>

                <%- include('../layouts/footer.ejs') %>